<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>XR Training Labs | Persistent Expansion</title> 
     
    <link rel="preconnect" href="https://fonts.googleapis.com"> 
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&family=Source+Code+Pro&display=swap" rel="stylesheet"> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script> 
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script> 
    <script src="https://cdn.jsdelivr.net/npm/handtrackjs/dist/handtrack.min.js"></script> 

    <style> 
        :root { 
            --bg-color: #030508; 
            --text-color: #ffffff; 
            --accent-color: #6366f1; 
            --hud-green: #4ade80; 
            --model-bg: #111418; 
            --glass-border: rgba(255, 255, 255, 0.1); 
            --grid-color: rgba(99, 102, 241, 0.12); 
            --error-red: #ff4444; 
        } 

        * { margin: 0; padding: 0; box-sizing: border-box; } 
         
        body {  
            font-family: 'Inter', sans-serif;  
            background: var(--bg-color);  
            color: var(--text-color);  
            overflow-x: hidden; 
        } 

        /* --- PARALLAX BACKGROUND --- */ 
        #parallax-container { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; 
            background: radial-gradient(circle at center, #0a0c14 0%, #030508 100%); 
            overflow: hidden; 
        } 
        .parallax-layer { position: absolute; top: -10%; left: -10%; width: 120%; height: 120%; will-change: transform; } 
         
        #grid-layer { 
            background-image: linear-gradient(var(--grid-color) 1px, transparent 1px), linear-gradient(90deg, var(--grid-color) 1px, transparent 1px); 
            background-size: 60px 60px; 
            mask-image: radial-gradient(ellipse at center, black, transparent 85%); 
        } 
        #particle-canvas { width: 100%; height: 100%; } 

        nav { position: fixed; top: 0; width: 100%; padding: 20px 5%; display: flex; justify-content: space-between; z-index: 1000; backdrop-filter: blur(10px); border-bottom: 1px solid var(--glass-border); } 
        .logo { font-weight: 700; font-family: 'Source Code Pro', monospace; color: var(--accent-color); font-size: 1rem; } 

        section { padding: 140px 5% 60px; min-height: 90vh; display: flex; flex-direction: column; justify-content: center; position: relative; z-index: 10; } 
         
        h1 { font-size: clamp(2.5rem, 8vw, 5rem); font-weight: 700; line-height: 1; margin-bottom: 10px; text-transform: uppercase; letter-spacing: -2px; } 
        h2.sub-heading { font-size: clamp(1.2rem, 3vw, 2rem); font-weight: 300; color: var(--accent-color); margin-bottom: 25px; text-transform: uppercase; letter-spacing: 2px; } 
         
        .intro-text { font-size: 1.1rem; color: #aaa; max-width: 800px; line-height: 1.6; margin-bottom: 40px; text-align: justify; hyphens: auto; } 
        .ar-content { margin-bottom: 20px; display: inline-block; padding: 5px 15px; border-left: 3px solid var(--accent-color); background: rgba(99, 102, 241, 0.05); font-family: 'Source Code Pro', monospace; font-size: 0.8rem; } 

        .grid-container { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; max-width: 1600px; margin: 20px auto; perspective: 2000px; } 
        @media (max-width: 1100px) { .grid-container { grid-template-columns: repeat(2, 1fr); } } 
        @media (max-width: 600px) { .grid-container { grid-template-columns: 1fr; } } 

        .video-card { position: relative; width: 100%; aspect-ratio: 16/9; border-radius: 10px; overflow: hidden; background: #000; border: 1px solid var(--glass-border); cursor: pointer; transform-style: preserve-3d; box-shadow: 0 10px 20px rgba(0,0,0,0.4); transition: z-index 0.3s; } 
        .shine { position: absolute; top: 0; left: 0; width: 150%; height: 150%; background: radial-gradient(circle, rgba(255,255,255,0.18) 0%, rgba(255,255,255,0) 70%); pointer-events: none; z-index: 5; opacity: 0; transform: translate(-50%, -50%); } 
        .video-card iframe { width: 100%; height: 100%; border: 0; pointer-events: none; transform: scale(1.02); } 

        .iphone-wrapper { display: flex; justify-content: center; align-items: center; padding: 40px 0; perspective: 1000px; } 
        .iphone-device { width: 320px; height: 650px; background: #111; border-radius: 40px; border: 8px solid #222; position: relative; box-shadow: 0 50px 100px rgba(0,0,0,0.8); overflow: hidden; } 
        .iphone-device::before { content: ''; position: absolute; top: 15px; left: 50%; transform: translateX(-50%); width: 100px; height: 25px; background: #000; border-radius: 20px; z-index: 20; } 
        .iphone-screen { width: 100%; height: 100%; background: #000; border-radius: 32px; overflow: hidden; } 
        .iphone-screen iframe { width: 100%; height: 100%; border: none; } 

        .spatial-sync-wrapper { display: flex; width: 100%; max-width: 1600px; margin: 30px auto 0; gap: 30px; align-items: flex-start; transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1); } 
        .model-card { width: 100%; height: 65vh; background: var(--model-bg); border-radius: 24px; border: 1px solid var(--glass-border); position: relative; overflow: hidden; box-shadow: 0 30px 60px rgba(0,0,0,0.4); flex-shrink: 0; } 
        .spatial-sync-wrapper.tracking-active .model-card { width: 66.66%; } 
        #preview-wrapper { width: 33.33%; height: 65vh; position: relative; display: none; border-radius: 24px; overflow: hidden; border: 1px solid var(--accent-color); background: #000; } 
        #v-preview { width: 100%; height: 100%; object-fit: cover; transform: scaleX(-1); filter: grayscale(1) brightness(0.8) contrast(1.2); } 
        model-viewer { width: 100%; height: 100%; outline: none; } 
        #tech-hud { position: absolute; top: 25px; left: 25px; padding: 20px; background: rgba(5, 7, 10, 0.9); border: 1px solid var(--hud-green); color: var(--hud-green); font-family: 'Source Code Pro', monospace; font-size: 0.7rem; pointer-events: none; opacity: 0; transition: 0.4s ease; z-index: 5; } 
        #tech-hud.active { opacity: 1; } 
        #hand-ui { margin-bottom: 20px; display: flex; align-items: center; gap: 20px; } 
        .cam-btn { background: var(--accent-color); color: #fff; border: none; padding: 12px 24px; border-radius: 4px; font-weight: 700; cursor: pointer; text-transform: uppercase; font-size: 0.75rem; font-family: 'Source Code Pro', monospace; transition: 0.3s; } 
        .ar-controls { display: flex; justify-content: center; margin-top: 25px; } 
        .ar-launch-btn { background: #fff; color: #000; border: none; padding: 18px 45px; border-radius: 4px; font-weight: 700; cursor: pointer; text-transform: uppercase; font-size: 0.8rem; } 
    </style> 
</head> 
<body> 

    <div id="parallax-container"> 
        <div id="grid-layer" class="parallax-layer"></div> 
        <div id="particle-layer" class="parallax-layer"> 
            <canvas id="particle-canvas"></canvas> 
        </div> 
    </div> 

    <nav><div class="logo">XR_TRAINING_LABS_v2.0</div></nav> 

    <section> 
        <h1>XR Training Labs</h1> 
        <h2 class="sub-heading">Spatial Computing Training Systems</h2> 
        <p class="intro-text"> 
            Spatial Computing Training Systems leverage augmented reality and computer vision to bridge the gap between theoretical knowledge and practical application.
        </p> 

        <div class="ar-content">DIAGNOSTIC_RECORDS // VIDEO_LIBRARY</div> 
         
        <div class="grid-container"> 
            <div class="video-card" data-video="_ckPvnl4HQI"><div class="shine"></div><iframe src="https://www.youtube.com/embed/_ckPvnl4HQI?controls=0&mute=1&enablejsapi=1"></iframe></div> 
            <div class="video-card" data-video="2OvfLt13D6Y"><div class="shine"></div><iframe src="https://www.youtube.com/embed/2OvfLt13D6Y?controls=0&mute=1&enablejsapi=1"></iframe></div> 
            <div class="video-card" data-video="8kNXOVutOJc"><div class="shine"></div><iframe src="https://www.youtube.com/embed/8kNXOVutOJc?controls=0&mute=1&enablejsapi=1"></iframe></div> 
            <div class="video-card" data-video="0m-LbA8E97Q"><div class="shine"></div><iframe src="https://www.youtube.com/embed/0m-LbA8E97Q?controls=0&mute=1&enablejsapi=1"></iframe></div> 
            <div class="video-card" data-video="DfQ2xc5ygGc"><div class="shine"></div><iframe src="https://www.youtube.com/embed/DfQ2xc5ygGc?controls=0&mute=1&enablejsapi=1"></iframe></div> 
            <div class="video-card" data-video="LvSaP_7rMbM"><div class="shine"></div><iframe src="https://www.youtube.com/embed/LvSaP_7rMbM?controls=0&mute=1&enablejsapi=1"></iframe></div> 
            <div class="video-card" data-video="hwnwM5zI8To"><div class="shine"></div><iframe src="https://www.youtube.com/embed/hwnwM5zI8To?controls=0&mute=1&enablejsapi=1"></iframe></div> 
            <div class="video-card" data-video="inC-Lab04aA"><div class="shine"></div><iframe src="https://www.youtube.com/embed/inC-Lab04aA?controls=0&mute=1&enablejsapi=1"></iframe></div> 
        </div> 

        <div class="ar-content" style="margin-top: 60px;">MOBILE_INTERFACE: AERO_ASSET_VIEWER</div>
        <div class="iphone-wrapper">
            <div class="iphone-device">
                <div class="iphone-screen">
                    <iframe srcdoc="
                        <!DOCTYPE html>
                        <html lang='en'>
                        <head>
                            <script type='module' src='https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js'></script>
                            <style>
                                :root { --app-bg: #0d1117; --raf-blue: #5d7a8c; --raf-red: #c21807; --icao-gold: #d4af37; --accent: #63b3ed; --glass: rgba(255, 255, 255, 0.05); --glass-border: rgba(255, 255, 255, 0.1); }
                                body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: var(--app-bg); font-family: sans-serif; color: white; }
                                #start-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at center, #1a202c 0%, #0d1117 100%); z-index: 1000; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: 0.8s; }
                                .radar { position: relative; width: 220px; height: 220px; border: 2px solid rgba(99, 179, 237, 0.2); border-radius: 50%; }
                                .radar::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 50%; background: conic-gradient(from -90deg, transparent 0deg, rgba(99, 179, 237, 0.4) 90deg, transparent 91deg); animation: sweep 4s linear infinite; }
                                @keyframes sweep { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
                                .commence-btn { margin-top: 30px; background: transparent; color: white; border: 1px solid white; padding: 10px 20px; border-radius: 4px; cursor: pointer; letter-spacing: 2px; }
                                .app-overlay { position: absolute; top: 50px; left: 50%; transform: translateX(-50%); z-index: 100; width: 90%; }
                                .control-panel { background: var(--glass); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); padding: 10px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; }
                                select { background: transparent; color: white; border: none; font-size: 12px; outline: none; width: 100%; cursor: pointer; }
                                .details-panel { position: absolute; top: 0; right: -100%; width: 100%; height: 100%; background: #0a0f19; z-index: 300; transition: 0.5s; padding: 50px 20px; box-sizing: border-box; }
                                .details-panel.active { right: 0; }
                                .spec-item { border-top: 1px solid var(--glass-border); padding: 10px 0; }
                                .spec-label { font-size: 9px; color: var(--accent); text-transform: uppercase; font-weight: 800; }
                                .spec-value { display: block; font-size: 13px; margin-top: 4px; font-family: monospace; }
                            </style>
                        </head>
                        <body>
                            <div id='start-screen'><div class='radar'></div><button class='commence-btn' onclick='enterApp()'>START VIEWER</button></div>
                            <div id='details-panel' class='details-panel'>
                                <div id='classif' style='font-size:10px;'>ICAO ARFF DATA</div>
                                <h2 id='asset-title' style='text-transform:uppercase;'>Asset</h2>
                                <div id='spec-container'></div>
                                <button onclick='toggleDetails()' style='width:100%; margin-top:30px; background:none; border:1px solid white; color:white; padding:10px;'>CLOSE</button>
                            </div>
                            <div class='app-overlay'><div class='control-panel'><div style='flex-grow:1'><span style='font-size:8px; color:var(--accent)'>Primary Asset</span><select id='model-select'></select></div><button onclick='toggleDetails()' style='background:var(--raf-blue); color:white; border:none; padding:5px 10px; border-radius:4px; font-size:9px;'>FACTS</button></div></div>
                            <model-viewer id='main-viewer' ar camera-controls auto-rotate shadow-intensity='2' environment-image='neutral'></model-viewer>
                            <script>
                                const data = [
                                    { name: 'Airbus A319', file: 'airbus_a319', type: 'civilian', arff_cat: '6', max_pax: '160', fuel: '24,210 L', exits: '6', hazards: 'High Pressure Oxygen, Lithium Batteries' },
                                    { name: 'Airbus A320', file: 'airbus_a320', type: 'civilian', arff_cat: '6', max_pax: '180', fuel: '27,200 L', exits: '8', hazards: 'Composite Material Dust' },
                                    { name: 'Airbus A321', file: 'airbus_a321', type: 'civilian', arff_cat: '7', max_pax: '236', fuel: '30,030 L', exits: '8', hazards: 'Cryogenic cooling systems' },
                                    { name: 'Airbus A380', file: 'airbus_a380', type: 'civilian', arff_cat: '10', max_pax: '853', fuel: '320,000 L', exits: '16', hazards: 'Massive Fuel Load, Multi-deck Egress' },
                                    { name: 'CH-47 Chinook', file: 'chinook-2', type: 'military', crew: '3', base: 'RAF Odiham', weight: '22,680 kg', weapons: 'M134 Minigun, M60 Machine Gun', desc: 'Heavy-lift transport helicopter.' }
                                ];
                                const viewer = document.getElementById('main-viewer');
                                const sel = document.getElementById('model-select');
                                function enterApp() { document.getElementById('start-screen').style.opacity = '0'; setTimeout(() => document.getElementById('start-screen').style.display='none', 800); }
                                function toggleDetails() { document.getElementById('details-panel').classList.toggle('active'); }
                                function update(i) {
                                    const a = data[i];
                                    viewer.src = 'models/' + a.file + '.glb';
                                    document.getElementById('asset-title').innerText = a.name;
                                    let html = '';
                                    if(a.type === 'civilian') {
                                        html = `<div class='spec-item'><span class='spec-label'>ARFF CAT</span><span class='spec-value'>${a.arff_cat}</span></div>
                                                <div class='spec-item'><span class='spec-label'>MAX PAX</span><span class='spec-value'>${a.max_pax}</span></div>
                                                <div class='spec-item'><span class='spec-label'>FUEL</span><span class='spec-value'>${a.fuel}</span></div>
                                                <div class='spec-item'><span class='spec-label'>RESCUE HAZARDS</span><span class='spec-value'>${a.hazards}</span></div>`;
                                    } else {
                                        html = `<div class='spec-item'><span class='spec-label'>CREW</span><span class='spec-value'>${a.crew}</span></div>
                                                <div class='spec-item'><span class='spec-label'>MTOW</span><span class='spec-value'>${a.weight}</span></div>
                                                <div class='spec-item'><span class='spec-label'>ARMAMENT</span><span class='spec-value'>${a.weapons}</span></div>`;
                                    }
                                    document.getElementById('spec-container').innerHTML = html;
                                }
                                data.forEach((d, i) => { const o = document.createElement('option'); o.value = i; o.innerText = d.name; sel.appendChild(o); });
                                sel.onchange = (e) => update(e.target.value);
                                update(0);
                            </script>
                        </body>
                        </html>
                    "></iframe>
                </div>
            </div>
        </div>
    </section> 

    <section style="min-height: 100vh;"> 
        <div class="ar-content">SPATIAL_SYNC: CHINOOK_CH47D</div> 
        <div id="hand-ui"> 
            <button class="cam-btn" id="t-btn">LOADING SENSORS...</button> 
        </div> 
        <div class="spatial-sync-wrapper" id="sync-engine"> 
            <div class="model-card"> 
                <div id="tech-hud"> 
                    <div>[SYSTEM STATUS: X-RAY ACTIVE]</div> 
                    <div>---------------------------</div> 
                    <div>STRUCTURAL INTEGRITY: 98.4%</div> 
                </div> 
                <model-viewer id="xr-model" src="models/chinook-2.glb" ar camera-controls camera-orbit="0deg 75deg 12m"></model-viewer> 
            </div> 
            <div id="preview-wrapper"><video id="v-preview" autoplay playsinline muted></video></div> 
        </div> 
        <div class="ar-controls"><button class="ar-launch-btn" onclick="document.querySelector('#xr-model').activateAR()">Launch Spatial AR</button></div> 
    </section> 

    <script> 
        // Logic for Parallax, Video Tilt, and Hand Tracking from original code
        const pCanvas = document.getElementById('particle-canvas'); 
        const pCtx = pCanvas.getContext('2d'); 
        let pWidth, pHeight; 
        const particles = []; 
        function resize() { pWidth = window.innerWidth; pHeight = window.innerHeight; pCanvas.width = pWidth; pCanvas.height = pHeight; } 
        class Particle { constructor() { this.reset(); } reset() { this.x = Math.random() * pWidth; this.y = Math.random() * pHeight; this.size = Math.random() * 1.5; this.speed = Math.random() * 0.4 + 0.1; this.opacity = Math.random() * 0.4 + 0.1; } update() { this.y -= this.speed; if (this.y < 0) this.reset(); } draw() { pCtx.fillStyle = `rgba(99, 102, 241, ${this.opacity})`; pCtx.beginPath(); pCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2); pCtx.fill(); } } 
        for(let i=0; i<80; i++) particles.push(new Particle()); 
        function animate() { pCtx.clearRect(0, 0, pWidth, pHeight); particles.forEach(p => { p.update(); p.draw(); }); requestAnimationFrame(animate); } 
        window.addEventListener('resize', resize); resize(); animate(); 
        window.addEventListener('mousemove', (e) => { 
            const moveX = (e.clientX - window.innerWidth/2) / window.innerWidth; 
            const moveY = (e.clientY - window.innerHeight/2) / window.innerHeight; 
            gsap.to('#grid-layer', { x: moveX * 45, y: moveY * 45, duration: 2.5 }); 
            gsap.to('#particle-layer', { x: moveX * 80, y: moveY * 80, duration: 2.5 }); 
        }); 

        const cards = document.querySelectorAll('.video-card'); 
        cards.forEach(card => { 
            const iframe = card.querySelector('iframe'); 
            const videoId = card.getAttribute('data-video'); 
            card.onmouseenter = () => { iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&controls=0&enablejsapi=1`; }; 
            card.onmouseleave = () => { iframe.src = iframe.src.replace("&autoplay=1", ""); }; 
        });

        // Hand tracking init
        const mv = document.querySelector('#xr-model'); 
        const btnTrack = document.getElementById("t-btn"); 
        handTrack.load().then(m => { btnTrack.innerText = "SENSORS READY"; btnTrack.style.background = "var(--hud-green)"; });
    </script> 
</body> 
</html>
