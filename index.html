<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XR Training Labs | Persistent Expansion</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&family=Source+Code+Pro&display=swap" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/handtrackjs/dist/handtrack.min.js"></script>

    <style>
        :root {
            --bg-color: #030508;
            --text-color: #ffffff;
            --accent-color: #6366f1;
            --hud-green: #4ade80;
            --model-bg: #111418;
            --glass-border: rgba(255, 255, 255, 0.1);
            --grid-color: rgba(99, 102, 241, 0.12);
            --error-red: #ff4444;
            --phone-bg: #0a0c10;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background: var(--bg-color); 
            color: var(--text-color); 
            overflow-x: hidden;
        }

        /* --- PARALLAX BACKGROUND --- */
        #parallax-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: radial-gradient(circle at center, #0a0c14 0%, #030508 100%);
            overflow: hidden;
        }
        .parallax-layer { position: absolute; top: -10%; left: -10%; width: 120%; height: 120%; will-change: transform; }
        
        #grid-layer {
            background-image: linear-gradient(var(--grid-color) 1px, transparent 1px), linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
            background-size: 60px 60px;
            mask-image: radial-gradient(ellipse at center, black, transparent 85%);
        }
        #particle-canvas { width: 100%; height: 100%; }

        nav { position: fixed; top: 0; width: 100%; padding: 20px 5%; display: flex; justify-content: space-between; z-index: 1000; backdrop-filter: blur(10px); border-bottom: 1px solid var(--glass-border); }
        .logo { font-weight: 700; font-family: 'Source Code Pro', monospace; color: var(--accent-color); font-size: 1rem; }

        section { padding: 140px 5% 60px; min-height: 90vh; display: flex; flex-direction: column; justify-content: center; position: relative; z-index: 10; }
        
        h1 { font-size: clamp(2.5rem, 8vw, 5rem); font-weight: 700; line-height: 1; margin-bottom: 10px; text-transform: uppercase; letter-spacing: -2px; }
        h2.sub-heading { font-size: clamp(1.2rem, 3vw, 2rem); font-weight: 300; color: var(--accent-color); margin-bottom: 25px; text-transform: uppercase; letter-spacing: 2px; }
        
        .intro-text { font-size: 1.1rem; color: #aaa; max-width: 800px; line-height: 1.6; margin-bottom: 40px; }
        .ar-content { margin-bottom: 20px; display: inline-block; padding: 5px 15px; border-left: 3px solid var(--accent-color); background: rgba(99, 102, 241, 0.05); font-family: 'Source Code Pro', monospace; font-size: 0.8rem; }

        /* --- PHONE INTERFACE DESIGN --- */
        .mobile-terminal-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px 0;
        }

        .handheld-device {
            width: 340px;
            height: 680px;
            background: #111;
            border-radius: 45px;
            border: 8px solid #222;
            position: relative;
            box-shadow: 0 50px 100px rgba(0,0,0,0.8), 0 0 20px rgba(99, 102, 241, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* Notch Area */
        .device-notch {
            width: 150px;
            height: 25px;
            background: #222;
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            border-bottom-left-radius: 15px;
            border-bottom-right-radius: 15px;
            z-index: 20;
        }

        .phone-screen {
            flex: 1;
            background: var(--phone-bg);
            padding: 40px 15px 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            scrollbar-width: none;
        }
        .phone-screen::-webkit-scrollbar { display: none; }

        .phone-header {
            font-family: 'Source Code Pro', monospace;
            color: var(--accent-color);
            font-size: 0.7rem;
            margin-bottom: 10px;
            text-align: center;
            border-bottom: 1px solid var(--glass-border);
            padding-bottom: 10px;
        }

        #phone-search {
            width: 100%;
            background: #1a1c22;
            border: 1px solid var(--accent-color);
            border-radius: 8px;
            padding: 10px;
            color: white;
            font-family: 'Inter';
            font-size: 0.85rem;
            margin-bottom: 10px;
            outline: none;
        }

        .asset-card {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border);
            padding: 15px;
            border-radius: 12px;
            transition: 0.3s;
        }
        .asset-card:hover { border-color: var(--accent-color); background: rgba(99, 102, 241, 0.1); }

        .asset-title { font-weight: 700; font-size: 0.9rem; margin-bottom: 5px; }
        .asset-tag { display: inline-block; font-size: 0.6rem; background: var(--accent-color); padding: 2px 6px; border-radius: 4px; margin-bottom: 8px; text-transform: uppercase; }
        .asset-desc { font-size: 0.75rem; color: #888; line-height: 1.3; }

        /* --- PREVIOUS STYLES --- */
        .grid-container { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; max-width: 1600px; margin: 20px auto; }
        @media (max-width: 1100px) { .grid-container { grid-template-columns: repeat(2, 1fr); } }
        .video-card { position: relative; aspect-ratio: 16/9; border-radius: 10px; overflow: hidden; background: #000; border: 1px solid var(--glass-border); cursor: pointer; }
        .video-card iframe { width: 100%; height: 100%; pointer-events: none; }
        
        .spatial-sync-wrapper { display: flex; width: 100%; max-width: 1600px; margin: 30px auto; gap: 30px; }
        .model-card { width: 100%; height: 65vh; background: var(--model-bg); border-radius: 24px; border: 1px solid var(--glass-border); position: relative; overflow: hidden; }
        model-viewer { width: 100%; height: 100%; outline: none; }
    </style>
</head>
<body>

    <div id="parallax-container">
        <div id="grid-layer" class="parallax-layer"></div>
        <div id="particle-layer" class="parallax-layer"><canvas id="particle-canvas"></canvas></div>
    </div>

    <nav><div class="logo">XR_TRAINING_LABS_v2.0</div></nav>

    <section>
        <h1>XR Training Labs</h1>
        <h2 class="sub-heading">Spatial Computing Systems</h2>
        <div class="grid-container">
            <div class="video-card" data-video="_ckPvnl4HQI"><iframe src="https://www.youtube.com/embed/_ckPvnl4HQI?mute=1&enablejsapi=1"></iframe></div>
            <div class="video-card" data-video="2OvfLt13D6Y"><iframe src="https://www.youtube.com/embed/2OvfLt13D6Y?mute=1&enablejsapi=1"></iframe></div>
            <div class="video-card" data-video="8kNXOVutOJc"><iframe src="https://www.youtube.com/embed/8kNXOVutOJc?mute=1&enablejsapi=1"></iframe></div>
            <div class="video-card" data-video="0m-LbA8E97Q"><iframe src="https://www.youtube.com/embed/0m-LbA8E97Q?mute=1&enablejsapi=1"></iframe></div>
        </div>
    </section>

    <section>
        <div class="ar-content">FLEET_REGISTRY // MOBILE_QUERY</div>
        <div class="mobile-terminal-wrapper">
            <div class="handheld-device">
                <div class="device-notch"></div>
                <div class="phone-screen">
                    <div class="phone-header">REQUISITION_PROTOCOL_v4.2</div>
                    <input type="text" id="phone-search" placeholder="Search aircraft/ordnance...">
                    <div id="phone-list">
                        </div>
                </div>
            </div>
        </div>
    </section>

    <section>
        <div class="ar-content">SPATIAL_SYNC: CHINOOK_CH47D</div>
        <div class="spatial-sync-wrapper">
            <div class="model-card">
                <model-viewer id="xr-model" src="models/chinook-2.glb" ar camera-controls shadow-intensity="1"></model-viewer>
            </div>
        </div>
    </section>

    <script>
        // --- 1. AIRCRAFT DATA ---
        const fleetData = [
            { name: "Airbus A319", type: "civilian", desc: "Focus on overwing exits for rapid egress; ensure slides are disarmed." },
            { name: "Airbus A380", type: "civilian", desc: "ICAO Cat 10. Double-deck hazard. GLARE skin is fire-resistant." },
            { name: "B-2 Spirit", type: "military", desc: "Stealth Bomber. DANGER: Toxic RAM if burning. Egress via underside." },
            { name: "F-16 Fighting Falcon", type: "military", desc: "Hydrazine hazard (EPU). Canopy jettison is explosive." },
            { name: "AIM-9M Sidewinder", type: "ordnance", desc: "IR Guided. Toxic smoke hazard. Approach from rear/sides only." },
            { name: "Storm Shadow", type: "ordnance", desc: "Cruise Missile. Contains JP-10 jet fuel. Massive foam required." }
            // Add full JSON here...
        ];

        const listContainer = document.getElementById('phone-list');
        const searchInput = document.getElementById('phone-search');

        function renderPhoneList(filter = "") {
            listContainer.innerHTML = "";
            fleetData
                .filter(item => item.name.toLowerCase().includes(filter.toLowerCase()))
                .forEach(item => {
                    const card = document.createElement('div');
                    card.className = "asset-card";
                    card.innerHTML = `
                        <div class="asset-tag">${item.type}</div>
                        <div class="asset-title">${item.name}</div>
                        <div class="asset-desc">${item.desc}</div>
                    `;
                    listContainer.appendChild(card);
                });
        }

        searchInput.addEventListener('input', (e) => renderPhoneList(e.target.value));
        renderPhoneList();

        // --- 2. PARTICLES & BG ---
        const pCanvas = document.getElementById('particle-canvas');
        const pCtx = pCanvas.getContext('2d');
        let pWidth, pHeight;
        const particles = [];

        function resize() {
            pWidth = window.innerWidth; pHeight = window.innerHeight;
            pCanvas.width = pWidth; pCanvas.height = pHeight;
        }

        class Particle {
            constructor() { this.reset(); }
            reset() {
                this.x = Math.random() * pWidth; this.y = Math.random() * pHeight;
                this.size = Math.random() * 1.5; this.speed = Math.random() * 0.4 + 0.1;
                this.opacity = Math.random() * 0.4 + 0.1;
            }
            update() { this.y -= this.speed; if (this.y < 0) this.reset(); }
            draw() {
                pCtx.fillStyle = `rgba(99, 102, 241, ${this.opacity})`;
                pCtx.beginPath(); pCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2); pCtx.fill();
            }
        }

        for(let i=0; i<60; i++) particles.push(new Particle());

        function animate() {
            pCtx.clearRect(0, 0, pWidth, pHeight);
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animate);
        }

        window.addEventListener('resize', resize);
        resize(); animate();

        window.addEventListener('mousemove', (e) => {
            const moveX = (e.clientX - window.innerWidth/2) / window.innerWidth;
            const moveY = (e.clientY - window.innerHeight/2) / window.innerHeight;
            gsap.to('#grid-layer', { x: moveX * 45, y: moveY * 45, duration: 2.5 });
        });
    </script>
</body>
</html>
